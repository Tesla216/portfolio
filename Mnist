import time
Training_set = []
Test_set =[]

for i in range(60000):
    new_list = []
    Training_set.append(new_list)

for x in range(10000):
    new_list = []
    Test_set.append(new_list)

def read_formatted_file_train():
    global Training_set
    index = 0
    number_list = []
    with open(r'C:\Users\Connor\Documents\Mnist\TrainingSet.txt') as file:

        for line in file.readlines():

            line = line.strip()  # Read the entire line and remove leading/trailing whitespaces
                
            # Split the line into numbers using the comma delimiter
            numbers = line.split(',')
            
            # Convert each number to an integer and append it to the number_list
            for number in numbers:
                number_list.append(int(number))
            Training_set[index].append(number_list)
            index += 1
            number_list = []
            #print(index)

def read_formatted_file_test():
    global Test_set
    index = 0
    number_list = []
    with open(r'C:\Users\Connor\Documents\Mnist\TestSet.txt') as file:

        for line in file.readlines():

            line = line.strip()  # Read the entire line and remove leading/trailing whitespaces
                
            # Split the line into numbers using the comma delimiter
            numbers = line.split(',')
            
            # Convert each number to an integer and append it to the number_list
            for number in numbers:
                number_list.append(int(number))
            Test_set[index].append(number_list)
            index += 1
            number_list = []
            #print(index)

def AI():
    global correct, wrong, score, wrong_qustions
    Test_set_size = len(Test_set)
    Training_set_size = len(Training_set)
    current_qustion = 0
    correct = 0
    wrong = 0
    wrong_qustions = []

    while current_qustion < Test_set_size:
        qustion = Test_set[current_qustion][0]
        min = 2147483647
        avrage = 0
        point = 0
        x = 0
        current_point = Training_set[x][0]
        while x < Training_set_size:
            avrage = 0
            point = 0
            while point < 784:
                index = abs((Training_set[x][0][point] - Test_set[current_qustion][0][point]))
                index = index * index
                avrage += index
                point += 1
            if min > avrage:
                min = avrage
                key = x
            x += 1

        if Test_set[current_qustion][0][784] == Training_set[key][0][784]:
            correct += 1
        else:
            wrong += 1
            wrong_qustions.append(current_qustion)
            print(current_qustion)
        total = correct + wrong
        score = (correct / total) * 100
        print(current_qustion, ' ', score, '%')
        current_qustion += 1

         

print('Loading Data...')
read_formatted_file_train()
read_formatted_file_test()
print('Done loading data')
print('Running AI')
start = time.time()
AI()
print('It took', time.time()-start, 'seconds.')
print('complete!!')
print(score, '%')
print(wrong_qustions)
